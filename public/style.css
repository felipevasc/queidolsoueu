:root {
    --pink-main: #ff80ab;
    --pink-light: #ffeff4;
    --pink-dark: #c94f7c;
    --white: #ffffff;
    --glass: rgba(255, 255, 255, 0.85);
    --shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
    --font-main: 'Nunito', sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

body {
    font-family: var(--font-main);
    background: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
    color: #444;
    height: 100vh;
    overflow: hidden;
}

#app {
    width: 100%;
    height: 100%;
    position: relative;
    overflow-y: auto;
}

.hidden { display: none !important; }

/* BOTÕES */
button {
    border: none;
    border-radius: 25px;
    padding: 12px 24px;
    font-weight: 800;
    cursor: pointer;
    transition: transform 0.2s;
    font-family: var(--font-main);
}
button:active { transform: scale(0.95); }

.big-btn {
    width: 100%;
    height: 80px;
    font-size: 1.2rem;
    border-radius: 20px;
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
}
.big-btn.pink { background: var(--pink-main); color: white; }
.big-btn.white { background: white; color: var(--pink-dark); }

.back-btn {
    background: transparent;
    color: var(--pink-dark);
    font-size: 1rem;
    margin-bottom: 20px;
}

/* TELAS */
section { padding: 20px; height: 100%; display: flex; flex-direction: column; }

.glass-panel {
    background: var(--glass);
    backdrop-filter: blur(10px);
    padding: 40px;
    border-radius: 30px;
    box-shadow: var(--shadow);
    text-align: center;
    margin: auto;
    width: 90%;
    max-width: 400px;
}

input {
    width: 100%;
    padding: 15px;
    margin: 10px 0;
    border: 2px solid var(--pink-light);
    border-radius: 15px;
    outline: none;
    background: rgba(255,255,255,0.9);
}
input:focus { border-color: var(--pink-main); }

/* HEADER */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: white;
    border-radius: 20px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
}

.user-info { display: flex; align-items: center; gap: 10px; }
.avatar-circle {
    width: 50px; height: 50px;
    border-radius: 50%;
    background: #eee;
    background-size: cover;
    background-position: center;
    border: 2px solid var(--pink-main);
}

/* GRIDS */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    overflow-y: auto;
    padding-bottom: 50px;
}

.shop-card, .collection-card {
    background: white;
    border-radius: 15px;
    padding: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}
.shop-card img, .collection-card img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 10px;
}
.shop-card.locked img { filter: grayscale(100%); opacity: 0.5; }

/* JOGO */
.game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}
.opponent-profile, .my-profile {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.8rem;
}
.opponent-profile img, .my-profile img {
    width: 50px; height: 50px;
    border-radius: 50%;
    border: 2px solid white;
    object-fit: cover;
    margin-bottom: 5px;
}
.opponent-profile img { border-color: #ccc; }
.my-profile img { border-color: var(--pink-main); }

#turn-indicator {
    text-align: center;
    background: var(--pink-main);
    color: white;
    border-radius: 20px;
    padding: 5px;
    margin-bottom: 15px;
    font-weight: bold;
    font-size: 0.9rem;
}

.board-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 colunas no mobile */
    gap: 10px;
    flex-grow: 1;
    overflow-y: auto;
}

.game-card {
    position: relative;
    aspect-ratio: 3/4;
    perspective: 1000px;
    cursor: pointer;
}

.game-card-inner {
    width: 100%; height: 100%;
    position: relative;
    transition: transform 0.6s, opacity 0.3s;
    transform-style: preserve-3d;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.game-card img {
    width: 100%; height: 100%;
    object-fit: cover;
    border-radius: 10px;
    backface-visibility: hidden;
}

.game-card.knocked-down .game-card-inner {
    transform: rotateX(50deg) scale(0.9);
    opacity: 0.4;
    filter: grayscale(100%);
}
.game-card span {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    background: rgba(255,255,255,0.9);
    font-size: 0.7rem;
    text-align: center;
    padding: 2px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
}

.game-footer {
    background: white;
    padding: 10px;
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.secret-card-container { text-align: center; font-size: 0.7rem; }
.secret-card-container img {
    width: 40px; height: 50px;
    object-fit: cover;
    border-radius: 5px;
    border: 2px solid var(--pink-main);
}
#end-turn-btn {
    background: var(--pink-main);
    color: white;
    font-size: 0.9rem;
}

/* WIN OVERLAY */
#win-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    display: flex; justify-content: center; align-items: center;
    z-index: 999;
}
.win-modal {
    background: white;
    padding: 40px;
    border-radius: 30px;
    text-align: center;
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn { from {transform: scale(0);} to {transform: scale(1);} }

:root {
    --pink-main: #ff5c8d; /* Rosa mais vibrante */
    --pink-light: #fff0f6;
    --pink-dark: #c92a5c;
    --gray-bg: #f4f4f9;
    --white: #ffffff;
    --opponent-gray: #e0e0e0;
    --turn-active: #ff5c8d;
    --turn-waiting: #9e9e9e;
}

body {
    font-family: 'Nunito', sans-serif;
    background: var(--gray-bg);
    margin: 0; overflow: hidden;
    user-select: none; /* Evita selecionar texto ao clicar rápido */
}

/* LAYOUT GERAL JOGO (FLEX VERTICAL) */
.game-layout {
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 0 !important; /* Remove padding padrão */
    background: #fff;
}

/* HUDS (Topo e Baixo) */
.hud-panel {
    flex: 0 0 auto; /* Altura fixa baseada no conteúdo */
    padding: 10px 15px;
    background: white;
    box-shadow: 0 0 15px rgba(0,0,0,0.05);
    z-index: 10;
    transition: background 0.5s;
}

.hud-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 600px;
    margin: 0 auto;
}

/* Identidade do Jogador */
.player-identity {
    display: flex;
    align-items: center;
    gap: 10px;
}
.avatar-frame {
    width: 55px; height: 55px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid #ddd;
    background: #eee;
}
.avatar-frame img { width: 100%; height: 100%; object-fit: cover; }

.player-text { display: flex; flex-direction: column; }
.p-name { font-weight: 800; font-size: 1rem; color: #444; }
.score-badge { font-size: 0.75rem; color: #777; background: #eee; padding: 2px 8px; border-radius: 10px; margin-top: 2px; }

/* Carta Secreta Miniatura */
.secret-card-mini {
    display: flex; flex-direction: column; align-items: center;
}
.secret-card-mini span { font-size: 0.6rem; font-weight: bold; color: var(--pink-dark); margin-bottom: 2px; }
.mini-card-img {
    width: 40px; height: 50px;
    position: relative;
}
.mini-card-img img { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; border: 1px solid var(--pink-main); }
.mini-label {
    position: absolute; bottom: 0; width: 100%;
    font-size: 0.5rem; background: rgba(0,0,0,0.7); color: white;
    text-align: center;
}

/* Botão de Confirmar */
#finish-turn-btn {
    background: var(--pink-main);
    color: white;
    padding: 8px 16px;
    font-size: 0.9rem;
    box-shadow: 0 4px 10px rgba(255, 92, 141, 0.4);
}
#finish-turn-btn:disabled {
    background: #ccc;
    box-shadow: none;
    cursor: not-allowed;
}

/* ÁREA CENTRAL DO JOGO */
#game-board-container {
    flex: 1; /* Ocupa o espaço restante */
    overflow-y: auto; /* Permite scroll */
    background: #f8f9fa;
    padding: 20px 10px;
    position: relative;
}

.board-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 colunas padrão */
    gap: 10px;
    max-width: 500px;
    margin: 0 auto;
}
@media (min-width: 600px) {
    .board-grid { grid-template-columns: repeat(4, 1fr); }
}

/* O CARD 3D FLIP */
.game-card {
    background-color: transparent;
    aspect-ratio: 3/4;
    perspective: 1000px; /* Necessário para o efeito 3D */
    cursor: pointer;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-radius: 12px;
}

/* Classe aplicada quando derrubada */
.game-card.knocked-down .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: 12px;
    overflow: hidden;
}

.card-front img {
    width: 100%; height: 100%; object-fit: cover;
}
.name-tag {
    position: absolute; bottom: 5px; left: 5px; right: 5px;
    background: rgba(255,255,255,0.9);
    color: #333; font-weight: bold; font-size: 0.7rem;
    padding: 4px; border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* Verso da Carta (O que aparece quando derruba) */
.card-back {
    background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%);
    color: white;
    transform: rotateY(180deg);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 3rem;
    border: 2px solid #999;
}

/* ESTADOS DE TURNO (CORES) */
body.my-turn #hud-top {
    background: var(--pink-light);
    border-bottom: 2px solid var(--pink-main);
}
body.my-turn #my-game-avatar { border-color: var(--pink-main); }
body.my-turn #hud-bottom { opacity: 0.6; filter: grayscale(1); }

body.opponent-turn #hud-top { opacity: 0.6; filter: grayscale(1); }
body.opponent-turn #hud-bottom {
    background: #eef;
    border-top: 2px solid #5c8dff; /* Azulzinho pro oponente */
}

/* MODAL DE VITORIA */
.win-modal {
    background: white;
    width: 90%; max-width: 400px;
    padding: 30px; border-radius: 25px;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    border: 4px solid var(--pink-main);
}
.reveal-section {
    display: flex; justify-content: center; gap: 15px;
    margin: 20px 0;
}
.reveal-card img {
    width: 70px; height: 90px;
    border-radius: 8px; object-fit: cover;
    margin-bottom: 5px;
    border: 2px solid gold;
}
.reveal-card.grayscale img { filter: grayscale(1); border-color: #ccc; }
.reveal-card p { font-size: 0.8rem; color: #777; margin-bottom: 5px;}
.reveal-card span { display: block; font-weight: bold; font-size: 0.9rem; }

/* REUTILIZANDO CLASSES ANTIGAS (Login, Menus) */
.hidden { display: none !important; }
/* ... (Copie as classes de .glass-panel, input, .big-btn do código anterior se não tiver salvo) ... */

/* MANTENHA O CSS ANTERIOR, APENAS SUBSTITUA/ADICIONE ESTAS PARTES: */

/* Correção para botões dentro do HUD (Tela de Jogo) */
.hud-content button {
    padding: 8px 15px; /* Menor padding */
    font-size: 0.85rem; /* Fonte menor */
    height: auto; /* Remove altura fixa de 80px */
    width: auto; /* Remove largura 100% */
    margin: 0;
    border-radius: 12px;
}

/* Ajuste específico para o botão de confirmar */
#finish-turn-btn {
    background: var(--pink-main);
    color: white;
    box-shadow: 0 4px 10px rgba(255, 92, 141, 0.4);
    white-space: nowrap; /* Evita quebra de linha */
}

/* Se o botão do menu principal estiver atrapalhando, especifique melhor */
.big-btn {
    width: 100%;
    height: 70px; /* Um pouco menor que antes */
    font-size: 1.1rem;
    border-radius: 20px;
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
}

/* Ajuste no Grid do Tabuleiro para caber melhor no mobile */
.board-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px; /* Gap menor */
    padding-bottom: 80px; /* Espaço para não ficar atrás do HUD de baixo */
}

.game-card {
    aspect-ratio: 3/4.2; /* Um pouco mais alto para caber o nome */
}

/* Nome do personagem na carta um pouco menor */
.name-tag {
    font-size: 0.6rem;
    padding: 2px;
    bottom: 2px;
}